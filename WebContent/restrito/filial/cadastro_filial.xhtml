<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"> 
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://java.sun.com/jsf/facelets"
      xmlns:f="http://java.sun.com/jsf/core"
      xmlns:h="http://java.sun.com/jsf/html"
      xmlns:p="http://primefaces.org/ui"> 

<h:head>

	<title>Cadastro Filial</title>

	<f:metadata>	    
 		<f:viewParam name = "id" value = "#{filialBean.filialSelecionada.cod_filial}"/>
	</f:metadata>

</h:head> 
	
	<ui:composition template="/template/interna.xhtml">
	
			<ui:define name="titulo">Filial</ui:define>
	
				<ui:define name="corpo">
		        			
					<h:form id ="formMessages">
				
	           			<p:messages id="messages" autoUpdate="true" closable = "true" />
	           		
	           	   	</h:form>	
	           	   	  	              	   
           	   		<h:form id = "cadastroFilial">
           	            
           	            <div class = "ui-fluid">
           	            
			           	   	<p:panelGrid columns="2" styleClass="ui-panelgrid-blank">   
			           	   	  		
				           	   <p:outputLabel value = "Codigo:" for = "codFilial"/>
				           	   <p:inputText value="#{filialBean.iniciar(usuarioBean.usuarioLogin).cod_filial}"
				           	   id = "codFilial"				           	 
				           	   maxlength="11"
				           	   disabled="#{filialBean.opcao()}"
				           	   style="width:auto"
				           	   />	
			           		   
			           		   <p:outputLabel value="Descrição:" for = "descrição"/>	
			           		   <p:inputText value="#{filialBean.iniciar(usuarioBean.usuarioLogin).descricao}"
			           		   id = "descrição"
			           		   maxlength="60"
			           		   size = "60"			           		
			           		   style="width:auto"/>
			           		   
			           		      
			           			<p:outputLabel value="Empresa:"/>											
								
								 <p:selectOneMenu  style="width:200px" value="#{filialBean.iniciar(usuarioBean.usuarioLogin).cod_empresa.cod_empresa}" id="idEmpresa">
						 		<f:selectItems value="#{empresaBean.listar(usuarioBean.usuarioLogin)}"  var="empresa" itemLabel="#{empresa.descricao}"  itemValue="#{empresa.cod_empresa}" />										
							
								</p:selectOneMenu>
			           
			           		  <p:commandButton action="#{filialBean.salvar()}" value = "Salvar">			           					           			
							  	<p:confirm header="Confirmação" message="Deseja realmente salvar?" icon="ui-icon-disk"/>
							  </p:commandButton>	
							
							  <p:commandButton icon="ui-icon-arrowrefresh-1-w" action="filial"  immediate="true"   style="width:30px;height:30px"/>			           		   				
															
								  <p:confirmDialog global="true" showEffect="fade" hideEffect="fade">
									<p:commandButton value="Yes" type="button" styleClass="ui-confirmdialog-yes" icon="ui-icon-check"/>
									<p:commandButton value="No" type="button" styleClass="ui-confirmdialog-no" icon="ui-icon-close" />
								  </p:confirmDialog>		
			           		
			           		<p:ajaxStatus onstart="PF('dlg').show()" onsuccess="PF('dlg').hide()"/>
			           		
			           		<p:dialog closable="false" widgetVar="dlg"  header="Processando..." draggable="false" hideEffect="fade" modal="true" resizable="false" showEffect="fade" responsive="true" >
			           			<p:graphicImage value ="/imagens/loadingBar-1.gif"/>	
			           		</p:dialog>
			           		
			           		</p:panelGrid>
			           								
		           		</div> 
		           				           		
		           	</h:form>
           							
			</ui:define>
			
	</ui:composition>
	 
</html>
